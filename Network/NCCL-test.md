
### NCCL 테스트는 독립적
```
NCCL Tests 구조:

┌─────────────────────────┐
│  all_reduce_perf        │  ← 독립 실행 프로그램
│  (C++ 바이너리)           │
├─────────────────────────┤
│  NCCL 라이브러리           │  ← 직접 호출
│  (libnccl.so)           │
├─────────────────────────┤
│  CUDA                   │
├─────────────────────────┤
│  EFA                    │
└─────────────────────────┘

PyTorch는 필요 없음! ✅

```


### NCCL 테스트 결과 읽기
```
# 출력:
#       size    algbw   busbw
      16GB     280GB/s 555GB/s

해석:
├─ 16GB 데이터 전송함
├─ 실제 속도: 280 GB/s ← 이것 보기!
├─ 효율 지표: 555 GB/s ← 참고용
└─ 목표: Algbw를 400 GB/s에 가깝게!

```





### Busbw vs 실제 대역폭
```
Busbw = Algbw × (2 × (N-1) / N)

125 노드:
Busbw = Algbw × (2 × 124 / 125)
Busbw = Algbw × 1.984


Busbw = 555 GB/s (목표)
Algbw = 555 / 1.984 = 279.74 GB/s

실제 네트워크 사용:
각 노드당 평균 279.74 GB/s 전송

이론적 최대: 400 GB/s (EFA)
실제 달성: 279.74 GB/s (Algbw)
활용도: 279.74 / 400 = 69.9% ✅ 가 됌

```





### 상황: 125개 컴퓨터가 데이터 합산
```
각 컴퓨터: 16GB 데이터
목표: 모두가 합계를 알기
시간: 0.057초 걸림

```



### Algbw 계산
```
"사용자 입장: 16GB를 얼마나 빨리 처리했나?"

Algbw = 16GB / 0.057초 = 280 GB/s

의미:
├─ 실제 네트워크 사용 속도
├─ "280 GB/s로 데이터 전송했구나"
└─ 이것이 중요한 값! ✅

```


### Busbw 계산
```
"네트워크 입장: 실제로 얼마나 많이 전송했나?"

Ring AllReduce 특성:
├─ 248단계 통신 (2×124)
├─ 각 단계마다 조금씩 전송
└─ 총 전송량: 16GB × 1.984 = 31.7GB

Busbw = 31.7GB / 0.057초 = 555 GB/s

의미:
├─ 알고리즘 효율 반영
├─ 비교 목적
└─ 참고용 메트릭

```
